{% extends 'base.html' %}
{% block title %}
  <title>mypage</title>
{% endblock %}
{% block body %}
    <div class="mypageall">
        <div class="mypage-img">
            <div class="selfinfo">
                <div class="namaenoichi">
                    <h1>{{ users.user_name }}</h1>
                    <button id="mydream-btn"><ion-icon name="create-outline"></ion-icon></button>
                </div>
                <p>{{ users.mydream }}</p>
                {% include 'modal/mydream.html' %}
            </div>
            <div class="mytasku">
                <div class="todotitle">
                    <p>未完了のTODOリスト</p>
                    <button class="mytask-button" id="add-todo-btn"><ion-icon name="add-circle-outline"></ion-icon></button>
                </div>
                {% include 'modal/add-task.html' %}
                <div class="mytasku-midasi"><a class="taskuname">タスク</a><a class="limit">期限</a></div>
                <ul class="todo">
                    {% for task in tasks %}
                    <div class="todo-yoko">
                    <li class="list-todo">{{ task.task }}</li>
                    <li class="list-limit">{{ task.limit_date }}</li>
                    </div>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
    {% endblock %}
    {% block script %}
      <script type="text/javascript">
        const channels = JSON.parse('{{ channels|tojson }}');
        const tasks = JSON.parse('{{ tasks|tojson }}');
        const uid = JSON.parse('{{ uid|tojson }}');
        const users = JSON.parse('{{ users|tojson }}');
      </script>
      <script src="../static/js/mypagemodal.js"></script>
     <script src="../static/js/todomodal.js"></script>
     <script
     src="{{url_for('static',filename='js/todo.js')}}"
     type="text/javascript"
     ></script>
    {% endblock %}